<div ng-controller="CollectionIndexCtrl">
	

	<% if @user == current_user %>
	<button ng-init="editable = false" ng-click="editable = !editable", class="toggle-edit-collection"><i class="fa fa-pencil-square-o"></i></button>
	<% end %>
	<br><br><br><br>


	<div class="collection-wrapper">
		<div ng-repeat="collection in user.collections" class="{{collection.title}} collection">

		<div class="row">

			<div class="col-md-4">
			<img ng-src="{{collection.image}}" class="collection-image pull-right">
			</div>

			<div class="col-md-6">

				<a class="collection-title"
				ng-show="editable"
				editable-text="collection.title"
				onaftersave="updateCollection('title', $data, collection.id)"
				href="#">
				<h1 class="collection-title">
					{{collection.title}}
				</h1>
				</a>

				<h1 class="collection-title"
				ng-hide="editable">
					{{collection.title}}
				</h1>		



				<a href="#"
				class="collection-description"
				ng-show="editable"
				editable-text="collection.description"
				onaftersave="updateCollection('description', $data, collection.id)"
				>
				<p class="collection-description">
					{{collection.description}}
				</p>
				</a>

				<p ng-hide="editable" class="collection-description">
					{{collection.description}}
				</p>
		</div>			
			<div class="col-md-2">
				<% if @user == current_user %> 
						<button class="details btn btn-primary" ng-click="upload = collection.title">
							Add To {{collection.title}}
						</button>


						<div class="upload-options" ng-show = "upload == collection.title">
							<a href="/users/{{user.id}}/collections/{{collection.id}}/works/new?upload_type=art">Add Art</a>
									<a href="/users/{{user.id}}/collections/{{collection.id}}/works/new?upload_type=writing" ng-click="addEditor($event)">Add Writing</a>
						</div>

				<% end %>
			</div>
		

	</div> <!-- ng-repeat finishes -->

</div>

</div>

<% if @user == current_user %>
	<a href="/users/{{user.id}}/collections/new">Add A New Collection</a>
<% end %>

</div>



